Version 4
SHEET 1 6076 2100
WIRE 16 16 0 16
WIRE 1040 16 1024 16
WIRE 1904 16 1888 16
WIRE 2048 16 1904 16
WIRE 2128 16 2048 16
WIRE 2256 16 2128 16
WIRE 2256 48 2256 16
WIRE 16 128 16 16
WIRE 1040 128 1040 16
WIRE 1904 128 1904 16
WIRE 2048 128 2048 16
WIRE 2128 128 2128 16
WIRE 2256 160 2256 128
WIRE 2400 160 2256 160
WIRE 2416 160 2400 160
WIRE 2256 192 2256 160
WIRE 2400 208 2400 160
WIRE 1904 304 1904 208
WIRE 2048 304 2048 192
WIRE 2048 304 1904 304
WIRE 2128 304 2128 192
WIRE 2128 304 2048 304
WIRE 2256 304 2256 272
WIRE 2256 304 2128 304
WIRE 2400 304 2400 272
WIRE 2400 304 2256 304
WIRE 16 320 16 208
WIRE 1040 320 1040 208
WIRE 1904 336 1904 304
WIRE 1248 512 1200 512
WIRE 1392 512 1328 512
WIRE 1536 512 1456 512
WIRE 1536 560 1536 512
WIRE 1200 624 1200 512
WIRE 608 672 416 672
WIRE 864 672 672 672
WIRE 1008 672 944 672
WIRE 1120 672 1008 672
WIRE 1008 704 1008 672
WIRE 784 720 768 720
WIRE 528 736 512 736
WIRE 784 752 784 720
WIRE 528 768 528 736
WIRE 672 768 672 672
WIRE 752 768 672 768
WIRE 416 784 416 672
WIRE 496 784 416 784
WIRE 1008 784 1008 768
WIRE 1008 784 816 784
WIRE 1200 784 1200 720
WIRE 1200 784 1008 784
WIRE 1616 784 1200 784
WIRE 608 800 608 672
WIRE 608 800 560 800
WIRE 752 800 608 800
WIRE 224 816 112 816
WIRE 416 816 304 816
WIRE 496 816 416 816
WIRE 528 848 528 832
WIRE 784 848 784 816
WIRE 416 896 416 816
WIRE 416 1008 416 960
FLAG 1904 336 0
FLAG 1888 16 +9V
IOPIN 1888 16 In
FLAG 2416 160 +4.5V
IOPIN 2416 160 In
FLAG 1040 320 0
FLAG 16 320 0
FLAG 416 1008 0
FLAG 512 736 +9V
IOPIN 512 736 In
FLAG 528 848 0
FLAG 768 720 +9V
IOPIN 768 720 In
FLAG 784 848 0
FLAG 1536 560 0
FLAG 1616 784 OUT
IOPIN 1616 784 In
FLAG 1024 16 IN
IOPIN 1024 16 In
FLAG 112 816 IN
IOPIN 112 816 In
SYMBOL voltage 1904 112 R0
WINDOW 0 -85 53 Left 2
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vps
SYMATTR Value 9
SYMBOL cap 2112 128 R0
SYMATTR InstName C23
SYMATTR Value 100µ
SYMBOL cap 2384 208 R0
SYMATTR InstName C15
SYMATTR Value 47µ
SYMBOL res 2240 32 R0
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL res 2240 176 R0
SYMATTR InstName R25
SYMATTR Value 10k
SYMBOL diode 2064 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4007
SYMBOL voltage 1040 112 R0
WINDOW 3 -179 185 Left 2
WINDOW 123 48 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 -83 52 Left 2
SYMATTR Value {DC_OFFSET}
SYMATTR Value2 AC {AC_AMPLITUDE} {AC_PHASE}
SYMATTR InstName Vac
SYMBOL voltage 16 112 R0
WINDOW 3 48 55 Left 2
WINDOW 123 29 129 Left 2
WINDOW 39 0 0 Left 0
WINDOW 0 -76 52 Left 2
SYMATTR Value SINE({DC_OFFSET} {AMPLITUDE} {FREQUENCY})
SYMATTR InstName Vtr
SYMBOL res 320 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R39
SYMATTR Value 47k
SYMBOL diode 432 960 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value 1S1588
SYMBOL res 960 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL cap 992 704 R0
SYMATTR InstName C7
SYMATTR Value 100p
SYMBOL pot 1216 624 M0
WINDOW 39 -321 78 Left 2
WINDOW 0 -54 18 Left 2
SYMATTR SpiceLine R=100k p={DISTORTION}
SYMATTR InstName VR1
SYMBOL res 1344 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 4.7k
SYMBOL cap 1456 496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 0.47µ
SYMBOL OpAmps\\UniversalOpAmp2 528 800 R0
SYMATTR InstName OP1
SYMBOL OpAmps\\UniversalOpAmp2 784 784 R0
SYMATTR InstName OP2
TEXT 2288 8 Left 4 ;Power Supply
TEXT -776 8 Left 4 ;Component Parameters
TEXT 1088 240 Left 2 !.ac dec 100 {START_FREQ} {STOP_FREQ}
TEXT 64 240 Left 2 ;.tran {SIMULATION_TIME}
TEXT -600 104 Left 2 ;.step param DISTORTION 0 1 0.25
TEXT 328 568 Left 4 ;Operational Amplifier
TEXT -600 136 Left 2 ;.step param TONE 0 1 0.25
TEXT 64 208 Left 2 !.param SIMULATION_TIME={10/FREQUENCY}
TEXT 160 8 Left 4 ;Transient Analysis
TEXT 64 128 Left 2 !.param DC_OFFSET=4.5 AMPLITUDE=0.2 FREQUENCY=1000
TEXT 1184 8 Left 4 ;AC Analysis
TEXT 1088 128 Left 2 !.param AC_AMPLITUDE=1 AC_PHASE=0
TEXT 1088 208 Left 2 !.param START_FREQ=1 STOP_FREQ=44100/2
TEXT -912 264 Left 2 !.model 2SC2240 NPN(Is=6.734f Bf=200 Br=0.1)
TEXT -912 232 Left 2 !.model 1S1588 D(Is=2.52n N=1.752)
TEXT -912 136 Left 2 !.param TONE=0.5
TEXT -912 168 Left 2 !.param LEVEL=1
TEXT -600 168 Left 2 ;.step param LEVEL 0 1 0.25
TEXT -912 104 Left 2 !.param DISTORTION=0.5
RECTANGLE Normal 1584 1072 144 448
RECTANGLE Normal 768 368 -96 -48
RECTANGLE Normal 1728 368 848 -48
RECTANGLE Normal 2560 368 1792 -48
RECTANGLE Normal -160 368 -960 -48
